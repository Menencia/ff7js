{"version":3,"file":"character.js","sources":["@traceur/generated/TemplateParser/3","@traceur/generated/TemplateParser/2","@traceur/generated/TemplateParser/1","@traceur/generated/TemplateParser/4","/Users/menencia/Sites/menencia/ff7js/src/character.js","@traceur/generated/TemplateParser/5","@traceur/generated/TemplateParser/0","@traceur/generated/TemplateParser/6"],"names":[],"mappings":"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","sourcesContent":["System.register($__placeholder__0, [], $__placeholder__1);","function() {\n      $__placeholder__0\n    }","var __moduleName = $__placeholder__0;","var $__placeholder__0 = $__placeholder__1","class Character {\n\n    /**\n     * @param game\n     */\n    constructor(game) {\n        this.game = game;\n        this.level = 1;\n        this.exp = 0;\n        this.expMax = 100;\n        this.expTotal = 0;\n        this.atb = 0;\n        this.atbMax = 4000;\n        this.hp = this.hpMax();\n        this.mp = this.mpMax();\n    }\n\n    /**\n     * @returns {number}\n     */\n    get atbProgress() {\n        return Math.ceil((this.atb * 100) / this.atbMax);\n    }\n\n    /**\n     * @returns {boolean}\n     */\n    get atbFull() {\n        return this.atb === this.atbMax;\n    }\n\n    /**\n     * @returns {number}\n     */\n    get hpMax() {\n        return this.hpBase * this.level;\n    }\n\n    /**\n     * @returns {number}\n     */\n    get mpMax() {\n        return this.mpBase * this.level;\n    }\n\n    /**\n     * @returns {*}\n     */\n    get hits() {\n        var base = this.weapon.hits * this.level;\n        var baseMin = Math.ceil((1 - 20 / 100) * base);\n        var baseMax = Math.ceil((1 + 20 / 100) * base);\n        return _.random(baseMin, baseMax);\n    }\n\n    /**\n     * @param p\n     */\n    setExp(p) {\n        this.exp += p;\n        this.expTotal += p;\n        if (this.exp > this.expMax) {\n            this.level++;\n            this.exp -= this.expMax;\n            this.expMax += Math.ceil(10 * this.level / 100 * this.expMax);\n        }\n    }\n\n    /**\n     * @returns {number}\n     */\n    get expProgress() {\n        return Math.ceil((this.exp * 100) / this.expMax);\n    }\n\n    /**\n     * @returns {number}\n     */\n    get expRemain() {\n        return this.expMax - this.exp;\n    }\n\n    /**\n     * @returns {Array}\n     */\n    get skills() {\n        var skills = [];\n        skills.push({name: 'Attack', fn: this.weapon});\n        return skills;\n    }\n\n    /**\n     *\n     */\n    fight() {\n        this.delay = 100;\n        this.status = 'running';\n        this.keepFighting();\n    }\n\n    /**\n     *\n     */\n    keepFighting() {\n        this.game.$timeout(() => {\n            if (this.Game.mode !== 'fight') return;\n            if (this.status === 'running') {\n                this.atb += this.delay;\n                this.atb = Math.min(this.atb, this.atbMax);\n            }\n            if (this.atb === this.atbMax) {\n                this.status = 'waiting';\n                this.game.battle.commands.add(new Command(this));\n            }\n            this.keepFighting();\n        }, this.delay)\n    }\n\n    /**\n     * \n     */\n    newTurn() {\n        this.status = 'running';\n        this.atb = 0;\n    }\n\n}","($traceurRuntime.createClass)($__placeholder__0, $__placeholder__1, $__placeholder__2)","return $__placeholder__0","System.get($__placeholder__0 +'')"]}